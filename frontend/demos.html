<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Demos â€” Zypher</title>
<style>
  :root{--bg:#0b0c12;--panel:#0f111a;--elev:#11131d;--text:#e8ebf5;--muted:#a6adc8;--edge:rgba(255,255,255,.09);--accent:#8a5cf6;--accent2:#00d4ff}
  *{box-sizing:border-box} html{-webkit-text-size-adjust:100%}
  html,body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}
  a{color:inherit;text-decoration:none} button{font:inherit}
  .container{max-width:1200px;margin:0 auto;padding:0 24px} .muted{color:var(--muted)} .section{padding:56px 0}

  #bg{position:fixed;inset:0;z-index:-2} .rays{position:fixed;inset:-12%;z-index:-1;filter:blur(36px);pointer-events:none;background:conic-gradient(from 180deg, color-mix(in oklab,var(--accent) 45%, transparent), color-mix(in oklab,var(--accent2) 48%, transparent), transparent 62%);opacity:.45;animation:spin 22s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}

  .nav{position:sticky;top:0;z-index:10;background:rgba(11,12,18,.62);backdrop-filter:blur(10px);border-bottom:1px solid var(--edge);display:flex;align-items:center;justify-content:space-between;padding:10px 18px}
  .brand{display:flex;gap:12px;align-items:center}.brand svg{width:28px;height:28px}
  .links{display:flex;gap:12px}.links a{padding:8px 12px;border-radius:12px;color:var(--muted)} .links a.active,.links a:hover{color:#fff;background:rgba(255,255,255,.08)}

  /* â€”â€” Hex Carousel â€”â€” */
  .hexwrap{position:relative;perspective:1200px;margin:18px 0}
  .hex-stage{position:relative;height:360px;transform-style:preserve-3d}
  .centre-hex{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:160px;height:138px;clip-path:polygon(25% 0,75% 0,100% 50%,75% 100%,25% 100%,0 50%);
              background:radial-gradient(120% 120% at 50% 0%,rgba(138,92,246,.25),rgba(255,255,255,.02));
              border:1px solid var(--edge);box-shadow:0 0 24px rgba(138,92,246,.25), inset 0 0 0 1px rgba(138,92,246,.25);display:grid;place-items:center;animation:humm 5s ease-in-out infinite}
  .centre-hex span{opacity:.9}
  @keyframes humm{0%,100%{filter:drop-shadow(0 0 10px rgba(138,92,246,.3))}50%{filter:drop-shadow(0 0 24px rgba(0,212,255,.35))}}

  .orbit{position:absolute;left:50%;top:50%;transform-style:preserve-3d;animation:orbit 24s linear infinite}
  @keyframes orbit{to{transform:translate(-50%,-50%) rotateZ(360deg)}}

  .hex-btn{appearance:none;border:none;cursor:pointer;color:var(--text);background:radial-gradient(120% 120% at 10% 0%, rgba(138,92,246,.16), rgba(255,255,255,.02));
           border:1px solid var(--edge); width:220px;height:190px;clip-path:polygon(25% 0,75% 0,100% 50%,75% 100%,25% 100%,0 50%);
           position:absolute;transform:translate(-50%,-50%); transition:transform .18s ease, box-shadow .18s ease}
  .hex-btn:hover{transform:translate(-50%,-50%) scale(1.035); box-shadow:0 18px 36px rgba(0,0,0,.45), inset 0 0 0 1px rgba(138,92,246,.22)}
  .hex-label{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);text-align:center;width:70%}
  .hex-label h4{margin:0 0 4px}
  .dot{display:inline-block;width:10px;height:10px;border-radius:999px;background:var(--accent);box-shadow:0 0 10px var(--accent);margin-right:8px}

  /* â€”â€” Responsive fall-back â€”â€” */
  @media (max-width:880px){
    .hex-stage{height:auto}
    .orbit{position:static;transform:none;animation:none}
    .centre-hex{display:none}
    .hex-grid{display:grid;grid-template-columns:1fr;gap:14px}
    .hex-btn{position:static;transform:none;width:100%;height:auto;clip-path:none;border-radius:16px}
    .hex-label{position:static;transform:none;padding:16px 14px}
  }

  /* â€”â€” Stage chat â€”â€” */
  .demo-layout{display:grid;grid-template-columns:1fr;gap:22px}
  @media (min-width:980px){ .demo-layout{grid-template-columns:520px 1fr} }
  .chat{display:none;height:560px;background:var(--panel);border:1px solid var(--edge);border-radius:18px;overflow:hidden;display:flex;flex-direction:column}
  .hdr{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--edge)}
  .pill{font-size:12px;padding:4px 8px;border-radius:999px;background:rgba(138,92,246,.18);border:1px solid color-mix(in oklab,var(--accent) 55%, transparent)}
  .msgs{flex:1;overflow:auto;padding:14px;display:flex;flex-direction:column;gap:10px}
  .msg{max-width:80%;padding:10px 12px;border-radius:12px;line-height:1.35}
  .msg.bot{background:rgba(138,92,246,.14);border:1px solid color-mix(in oklab,var(--accent) 55%, transparent)}
  .msg.user{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.18);align-self:flex-end}
  .typing{opacity:.75}
  .tools{display:flex;gap:10px;padding:10px;border-top:1px solid var(--edge);align-items:center}
  .bar{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,.04);border:1px solid var(--edge);border-radius:14px;padding:8px;flex:1}
  .bar input{flex:1;background:transparent;border:none;outline:none;color:var(--text);font-size:16px}
  .icon{width:40px;height:40px;display:grid;place-items:center;border-radius:12px;border:1px solid var(--edge);background:rgba(255,255,255,.04);cursor:pointer}
  .icon:active{transform:translateY(1px)}
  .mic.glow{box-shadow:0 0 0 2px color-mix(in oklab,var(--accent) 55%, transparent),0 0 26px 6px color-mix(in oklab,var(--accent) 55%, transparent),inset 0 0 12px color-mix(in oklab,var(--accent) 40%, transparent); border-color: color-mix(in oklab, var(--accent) 60%, transparent) }
</style>
</head>
<body>
<canvas id="bg"></canvas><div class="rays" aria-hidden="true"></div>

<nav class="nav">
  <div class="brand">
    <svg viewBox="0 0 256 256" aria-hidden="true"><defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#8A5CF6"/><stop offset="100%" stop-color="#00D4FF"/></linearGradient></defs><rect width="256" height="256" rx="40" fill="#0A0B10"/><path d="M176 32L96 144h56l-48 80 80-112h-56l48-80z" fill="url(#g)"/></svg>
    <strong>Zypher</strong>
  </div>
  <div class="links"><a href="index.html">Home</a><a class="active" href="demos.html">Demos</a><a href="contact.html">Contact</a></div>
  <div class="muted">Voice & Chat</div>
</nav>

<main class="container section">
  <h2 style="margin:0 0 6px">Live demos</h2>
  <p class="muted" style="margin:0 0 6px">Select your demo.</p>

  <div class="demo-layout">
    <!-- HEX CAROUSEL -->
    <section>
      <div class="hexwrap">
        <div class="hex-stage" id="hexStage">
          <div class="centre-hex"><span>select your demo</span></div>

          <div class="orbit" id="orbit" style="transform:translate(-50%,-50%) rotateZ(0deg)">
            <!-- Positions around a circle -->
            <button class="hex-btn" type="button" style="left:50%; top:-40px" data-key="appointly">
              <div class="hex-label"><h4><span class="dot"></span>Appointly</h4><small class="muted">Appointment booking</small></div>
            </button>
            <button class="hex-btn" type="button" style="left:100%; top:160px" data-key="realestate">
              <div class="hex-label"><h4><span class="dot"></span>Property Qualifier</h4><small class="muted">Lead intake & viewings</small></div>
            </button>
            <button class="hex-btn" type="button" style="left:50%; top:360px" data-key="salon">
              <div class="hex-label"><h4><span class="dot"></span>Salon Booker</h4><small class="muted">Services & add-ons</small></div>
            </button>
            <button class="hex-btn" type="button" style="left:0%; top:160px" data-key="carins">
              <div class="hex-label"><h4><span class="dot"></span>Car Insurance</h4><small class="muted">Quick-qualify & quote</small></div>
            </button>
          </div>
        </div>

        <!-- Mobile fallback tiles -->
        <div class="hex-grid" id="hexGrid" hidden>
          <button class="hex-btn" data-key="appointly"><div class="hex-label"><h4><span class="dot"></span>Appointly</h4><small class="muted">Appointment booking</small></div></button>
          <button class="hex-btn" data-key="realestate"><div class="hex-label"><h4><span class="dot"></span>Property Qualifier</h4><small class="muted">Lead intake & viewings</small></div></button>
          <button class="hex-btn" data-key="salon"><div class="hex-label"><h4><span class="dot"></span>Salon Booker</h4><small class="muted">Services & add-ons</small></div></button>
          <button class="hex-btn" data-key="carins"><div class="hex-label"><h4><span class="dot"></span>Car Insurance</h4><small class="muted">Quick-qualify & quote</small></div></button>
        </div>
      </div>
      <small class="muted">Hover or drag horizontally to spin. Tap a hex to start.</small>
    </section>

    <!-- STAGE CHAT -->
    <section>
      <div class="chat" id="chat">
        <div class="hdr"><div><span class="pill" id="botName">Bot</span></div><div><button class="icon" id="backBtn" title="Back">âŸ²</button></div></div>
        <div class="msgs" id="msgs"></div>
        <div class="tools">
          <div class="bar"><input id="chatInput" placeholder="Say somethingâ€¦" /><button id="micBtn" class="icon mic">ðŸŽ¤</button></div>
          <button id="sendBtn" class="icon">âž¤</button>
        </div>
      </div>
      <small class="muted" style="display:block;margin-top:8px">British English. Auto-send on pause.</small>
    </section>
  </div>
</main>

<footer class="container" style="padding:30px 0;color:var(--muted);border-top:1px solid var(--edge)">Â© 2025 Zypher â€” All rights reserved.</footer>

<script>
/* Background reused (stars + cyber lines) */
(()=>{const c=document.getElementById('bg'),x=c.getContext('2d');let stars=[],shots=[],W,H,ratio=window.devicePixelRatio||1;
function resize(){W=c.width=innerWidth*ratio;H=c.height=innerHeight*ratio;x.setTransform(ratio,0,0,ratio,0,0);make();}
function make(){stars=[];const n=Math.floor(innerWidth*innerHeight/2600);for(let i=0;i<n;i++){stars.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,s:Math.random()*1.2+0.2,a:Math.random()*0.5+0.3});}}
function spawn(){const y=Math.random()*innerHeight*0.7+20;shots.push({x:-80,y,vx:6+Math.random()*4,life:1});}
setInterval(spawn,1400);
function step(){x.clearRect(0,0,innerWidth,innerHeight);
  for(const s of stars){x.globalAlpha=s.a;x.fillStyle='#fff';x.fillRect(s.x,s.y,s.s,s.s);s.x+=0.02;if(s.x>innerWidth)s.x=0;}
  x.globalAlpha=1;for(const sh of shots){x.strokeStyle='rgba(0,212,255,.4)';x.lineWidth=2;x.beginPath();x.moveTo(sh.x,sh.y);x.lineTo(sh.x+26,sh.y-6);x.stroke();
    x.strokeStyle='rgba(138,92,246,.35)';x.beginPath();x.moveTo(sh.x-18,sh.y+4);x.lineTo(sh.x+10,sh.y-2);x.stroke();sh.x+=sh.vx;sh.life-=0.02;}
  shots=shots.filter(s=>s.x<innerWidth+60 && s.life>0); requestAnimationFrame(step);
}
addEventListener('resize',resize,{passive:true});resize();make();step();})();

/* Backend toggle (fill this to use your API) */
window.ZYPHER_API_BASE = ""; // e.g. "https://api.zypheragents.com"

/* HEX CAROUSEL INTERACTION */
(()=>{const stage=document.getElementById('hexStage'); const orbit=document.getElementById('orbit'); const grid=document.getElementById('hexGrid');
const isMobile=matchMedia('(max-width: 880px)').matches; if(isMobile){ grid.hidden=false; stage.style.display='none'; }
let angle=0, dragging=false, startX=0, startAngle=0;
function setAngle(a){angle=a; orbit.style.transform=`translate(-50%,-50%) rotateZ(${angle}deg)`;}
stage.addEventListener('pointerdown',e=>{dragging=true;startX=e.clientX;startAngle=angle; stage.setPointerCapture(e.pointerId);});
stage.addEventListener('pointermove',e=>{if(!dragging)return; const dx=e.clientX-startX; setAngle(startAngle+dx*0.2);});
stage.addEventListener('pointerup',()=>dragging=false);
[...document.querySelectorAll('.hex-btn')].forEach(b=>b.addEventListener('click',()=>openChat(b.dataset.key)));})();

/* CHAT */
const state={active:null,bots:{appointly:{name:'Appointly (Appointment booking)'},realestate:{name:'Property Qualifier'},salon:{name:'Salon Booker'},carins:{name:'Car Insurance'}},history:[]};
const $=s=>document.querySelector(s);
function add(role,text,typing=false){const d=document.createElement('div');d.className='msg '+role+(typing?' typing':'');d.textContent=text;$('#msgs').appendChild(d);$('#msgs').scrollTop=$('#msgs').scrollHeight;return d;}
function openChat(key){state.active=key;state.history=[];$('#chat').style.display='flex';$('#botName').textContent=state.bots[key].name;$('#msgs').innerHTML='';add('bot',`Hi â€” Iâ€™m ${state.bots[key].name}. Ask me anything or press the mic.`);}
document.getElementById('backBtn').addEventListener('click',()=>{$('#chat').style.display='none';});
async function backend(bot, messages){const base=window.ZYPHER_API_BASE;if(!base)throw new Error('no backend');const r=await fetch(base.replace(/\\/$/,'')+'/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({bot,messages})});if(!r.ok)throw new Error('HTTP '+r.status);const j=await r.json();return j.reply||'';}
function local(bot,t){const x=t.toLowerCase();if(/(politics|joke|song|poem)/.test(x))return "Letâ€™s keep it on task â€” what would you like help with today?";if(bot==='appointly'&&/(tue|tuesday|slot|book|appointment)/.test(x))return "I can do Tuesday at 10:00 or 14:30. Which suits you?";if(bot==='realestate'&&/(view|flat|house|property)/.test(x))return "Smashing â€” are you buying or renting, and whatâ€™s your budget?";if(bot==='salon'&&/(cut|hair|trim|colour|color)/.test(x))return "We can book a Cut & Finish. Fancy adding a nourishing scalp treatment?";if(bot==='carins'&&/(quote|insurance|policy|premium)/.test(x))return "No problem. Iâ€™ll need your name, date of birth, licence type, and any claims in the last 3 years.";return "Got it. Tell me a little more and Iâ€™ll guide you.";}
async function sendNow(t){if(!t.trim())return;add('user',t);state.history.push({role:'user',content:t});const typing=add('bot','â€¦',true);let reply='';try{reply=await backend(state.active,state.history);}catch{reply=local(state.active,t);}typing.remove();add('bot',reply);state.history.push({role:'assistant',content:reply});}
function handleSend(){const i=$('#chatInput');const t=i.value.trim();if(!t)return;i.value='';sendNow(t);}$('#sendBtn').addEventListener('click',handleSend);$('#chatInput').addEventListener('keydown',e=>{if(e.key==='Enter')handleSend();});

/* VOICE en-GB, interim typing + auto-send */
(()=>{let rec=null,listening=false,last="";const mic=()=>$('#micBtn');const ok=()=>('SpeechRecognition'in window)||('webkitSpeechRecognition'in window);
function ensure(){if(rec)return rec;const SR=window.SpeechRecognition||window.webkitSpeechRecognition;rec=new SR();rec.lang='en-GB';rec.continuous=false;rec.interimResults=true;return rec;}
function glow(on){mic().classList.toggle('glow',!!on)} let raf;function typeInto(to){const i=$('#chatInput');cancelAnimationFrame(raf);const from=i.value,st=performance.now(),dur=Math.min(800,18*to.length);function step(t){const p=Math.min(1,(t-st)/dur);i.value=to.slice(0,Math.round(from.length+(to.length-from.length)*p));if(p<1)raf=requestAnimationFrame(step);}raf=requestAnimationFrame(step);}
mic().addEventListener('click',()=>{if(!ok()){add('bot','Speech recognition isnâ€™t supported in this browser.');return;}const r=ensure();if(!listening){listening=true;glow(true);last="";r.start();r.onresult=e=>{let fin="",int="";for(let i=e.resultIndex;i<e.results.length;i++){const tr=e.results[i][0].transcript;if(e.results[i].isFinal)fin+=tr;else int+=tr;} if(fin){last+=fin;typeInto(last.trim());}else if(int){typeInto((last+int).trim());}};r.onerror=()=>{listening=false;glow(false);add('bot','Sorry â€” I couldnâ€™t hear that. Try again?');};r.onend=()=>{listening=false;glow(false);const i=$('#chatInput');const t=(i.value||'').trim();if(t){i.value='';sendNow(t);} };}else{r.stop();listening=false;glow(false);} });})();
</script>
</body>
</html>
