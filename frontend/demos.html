<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Demos â€” Zypher</title>
<style>
  :root{--bg:#0b0c12; --panel:#0f111a; --elev:#11131d; --text:#e6e9f2; --muted:#a6adc8; --accent:#8a5cf6; --accent-2:#00d4ff; --edge:rgba(255,255,255,.08)}
  *{box-sizing:border-box} html{-webkit-text-size-adjust:100%}
  html,body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}
  a{color:inherit;text-decoration:none} button{font:inherit} img{max-width:100%;display:block} .muted{color:var(--muted)}
  .container{max-width:1200px;margin:0 auto;padding:0 24px} .section{padding:64px 0}

  /* BG */
  .bg{position:fixed; inset:0; pointer-events:none; z-index:-1;
      background: radial-gradient(1200px 900px at 80% -10%, color-mix(in oklab, var(--accent) 50%, transparent), transparent 60%),
                  radial-gradient(900px 700px at -10% 30%, color-mix(in oklab, var(--accent-2) 55%, transparent), transparent 60%);}
  .orbs{position:fixed; inset:0; pointer-events:none; z-index:-1; overflow:hidden}
  .orb{position:absolute; width:22px; height:22px; border-radius:999px; background: color-mix(in oklab, var(--accent) 70%, #fff);
       box-shadow:0 0 24px color-mix(in oklab, var(--accent) 70%, #fff); opacity:.35; animation: float 14s ease-in-out infinite}
  .orb:nth-child(2){left:12%; top:70%; animation-duration:16s}
  .orb:nth-child(3){left:80%; top:20%; animation-duration:18s}
  .orb:nth-child(4){left:60%; top:80%; animation-duration:22s}
  @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-18px)}100%{transform:translateY(0)}}

  /* NAV */
  .nav{display:flex;align-items:center;justify-content:space-between;padding:12px 18px;position:sticky;top:0;z-index:10;background:rgba(11,12,18,.65);backdrop-filter:blur(8px);border-bottom:1px solid var(--edge)}
  .brand{display:flex;align-items:center;gap:12px}.brand svg{width:28px;height:28px}
  .nav-links{display:flex;gap:14px}.nav-links a{padding:9px 12px;border-radius:12px;color:var(--muted)} .nav-links a.active,.nav-links a:hover{color:#fff;background:rgba(255,255,255,.06)}

  /* Dock + Stage */
  .dock-and-stage{display:grid;grid-template-columns:1fr;gap:24px}
  .dock{display:grid;grid-template-columns:1fr;gap:14px}
  .dock-item{display:flex;gap:12px;align-items:center;text-align:left;background:radial-gradient(120% 120% at 10% 0%,rgba(138,92,246,.12),rgba(255,255,255,.02)),var(--panel);border:1px solid var(--edge);border-radius:16px;padding:14px;cursor:pointer;transition:.18s ease}
  .dock-item:hover{transform:translateY(-2px); box-shadow:0 14px 30px rgba(0,0,0,.35), inset 0 0 0 1px color-mix(in oklab, var(--accent) 40%, transparent)}
  .dock-dot{width:10px;height:10px;border-radius:999px;background:var(--accent); box-shadow:0 0 10px var(--accent)}

  .stage{min-height:560px}
  .stage-placeholder{display:grid;place-items:center;height:560px;border:1px dashed var(--edge);border-radius:18px;color:var(--muted); animation: fadeIn .25s ease-out both}
  @keyframes fadeIn{from{opacity:0}to{opacity:1}}

  .chat{height:560px;background:var(--panel);border:1px solid var(--edge);border-radius:18px;display:flex;flex-direction:column;overflow:hidden}
  .chat-header{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--edge)}
  .pill{font-size:12px;padding:4px 8px;border-radius:999px;background:rgba(138,92,246,.18);border:1px solid color-mix(in oklab, var(--accent) 50%, transparent)}
  .msgs{flex:1;overflow:auto;padding:14px;display:flex;flex-direction:column;gap:10px}
  .msg{max-width:80%;padding:10px 12px;border-radius:12px;line-height:1.35}
  .msg.bot{background:rgba(138,92,246,.14);border:1px solid color-mix(in oklab, var(--accent) 55%, transparent)}
  .msg.user{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.18);align-self:flex-end}
  .tools{display:flex;gap:10px;padding:10px;border-top:1px solid var(--edge);align-items:center}
  .input-bar{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,.04);border:1px solid var(--edge);border-radius:14px;padding:8px;flex:1}
  .input-bar input{flex:1;background:transparent;border:none;outline:none;color:var(--text);font-size:16px}
  .icon-btn{width:40px;height:40px;display:grid;place-items:center;border-radius:12px;border:1px solid var(--edge);background:rgba(255,255,255,.04);cursor:pointer}
  .icon-btn:active{transform:translateY(1px)}
  .mic.glow{box-shadow:0 0 0 2px color-mix(in oklab, var(--accent) 55%, transparent),0 0 26px 6px color-mix(in oklab, var(--accent) 55%, transparent),inset 0 0 12px color-mix(in oklab, var(--accent) 40%, transparent); border-color: color-mix(in oklab, var(--accent) 60%, transparent)}

  .footer{padding:40px 24px;border-top:1px solid var(--edge)}
  .footer-row{display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap}

  @media (min-width:820px){
    .dock-and-stage{grid-template-columns:360px 1fr}
  }
</style>
</head>
<body>
  <div class="bg"></div>
  <div class="orbs"><div class="orb" style="left:14%;top:30%"></div><div class="orb"></div><div class="orb"></div><div class="orb"></div></div>

  <nav class="nav">
    <div class="brand">
      <svg viewBox="0 0 256 256" aria-hidden="true"><defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#8A5CF6"/><stop offset="100%" stop-color="#00D4FF"/></linearGradient></defs><rect width="256" height="256" rx="40" fill="#0A0B10"/><path d="M176 32L96 144h56l-48 80 80-112h-56l48-80z" fill="url(#g)"/></svg>
      <span>Zypher</span>
    </div>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a class="active" href="demos.html">Demos</a>
      <a href="contact.html">Contact</a>
    </div>
    <div class="muted">Voice & Chat</div>
  </nav>

  <main class="container section">
    <h2 style="margin:0 0 12px">Live demos</h2>
    <p class="muted" style="margin:0 0 20px">Our four flagship agents. Choose one from the Dock â€” the Stage opens on the right. Speak naturally; weâ€™ll type what you say and send when you pause.</p>

    <div class="dock-and-stage">
      <!-- Dock: only the 4 main bots -->
      <div class="dock">
        <button class="dock-item" onclick="openChat('appointly')"><div class="dock-dot"></div><div><h4>Appointly</h4><small class="muted">Appointment booking</small></div></button>
        <button class="dock-item" onclick="openChat('realestate')"><div class="dock-dot"></div><div><h4>Property Qualifier</h4><small class="muted">Lead intake & viewings</small></div></button>
        <button class="dock-item" onclick="openChat('salon')"><div class="dock-dot"></div><div><h4>Salon Booker</h4><small class="muted">Services & add-ons</small></div></button>
        <button class="dock-item" onclick="openChat('carins')"><div class="dock-dot"></div><div><h4>Car Insurance</h4><small class="muted">Quick-qualify & quote</small></div></button>
      </div>

      <!-- Stage -->
      <div class="stage">
        <div class="stage-placeholder"><p>Select a demo from the Dock to start chatting.</p></div>

        <section class="chat-wrap" style="display:none">
          <div class="chat">
            <div class="chat-header">
              <div class="chat-title"><span class="pill" id="chatBotName">Bot</span></div>
              <div class="chat-actions"><button class="icon-btn" onclick="backToDock()" title="Back to Dock">âŸ²</button></div>
            </div>
            <div class="msgs"></div>
            <div class="tools">
              <div class="input-bar">
                <input id="chatInput" placeholder="Say somethingâ€¦" />
                <button id="micBtn" class="icon-btn mic" title="Voice input">ðŸŽ¤</button>
              </div>
              <button id="sendBtn" class="icon-btn" title="Send">âž¤</button>
            </div>
          </div>
          <small class="muted" style="display:block;margin-top:8px">Voice uses your browserâ€™s Speech API. Weâ€™ll auto-send when you pause.</small>
        </section>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container footer-row">
      <div>Â© 2025 Zypher â€” All rights reserved.</div>
      <div class="muted">Built for speed â€¢ Privacy-first â€¢ UK/EU ready</div>
    </div>
  </footer>

<script>
  // 4 bots
  const state={activeBot:null,bots:{
    appointly:{name:'Appointly (Appointment booking)'},
    realestate:{name:'Property Qualifier'},
    salon:{name:'Salon Booker'},
    carins:{name:'Car Insurance'}
  }};
  const qs=s=>document.querySelector(s);
  function addMsg(role,text){const m=qs('.msgs'); if(!m) return; const d=document.createElement('div'); d.className='msg '+role; d.textContent=text; m.appendChild(d); m.scrollTop=m.scrollHeight;}

  function openChat(key){
    state.activeBot=key;
    qs('.stage-placeholder')?.remove();
    qs('.chat-wrap').style.display='block';
    qs('#chatBotName').textContent = state.bots[key].name;
    const m=qs('.msgs'); m.innerHTML='';
    addMsg('bot',`Hi â€” Iâ€™m ${state.bots[key].name}. Ask me anything or press the mic to speak.`);
  }
  function backToDock(){
    qs('.chat-wrap').style.display='none';
    const st=qs('.stage'); if(!qs('.stage-placeholder')){const ph=document.createElement('div'); ph.className='stage-placeholder'; ph.innerHTML='<p>Select a demo from the Dock to start chatting.</p>'; st.prepend(ph);}
  }

  // Simple placeholder responses (front-end only demo)
  function fakeAIResponse(input){
    const k=state.activeBot, low=input.toLowerCase();
    if(k==='appointly'&&low.includes('tuesday')) return "I can offer Tuesday at 10:00 or 14:30. What suits you best?";
    if(k==='realestate'&&(low.includes('view')||low.includes('flat'))) return "Smashing â€” are you buying or renting, and whatâ€™s your budget range?";
    if(k==='salon'&&(low.includes('cut')||low.includes('hair'))) return "We can book a Cut & Finish. Fancy adding a nourishing scalp treatment today?";
    if(k==='carins'&&low.includes('quote')) return "No problem. Iâ€™ll need your name, date of birth, licence type, and any claims in the last 3 years.";
    return "Got it. Tell me a little more and Iâ€™ll guide you from there.";
  }
  function handleSend(){
    const i=qs('#chatInput'); const t=i.value.trim(); if(!t) return;
    addMsg('user',t); i.value='';
    setTimeout(()=>addMsg('bot',fakeAIResponse(t)), 400);
  }
  document.addEventListener('DOMContentLoaded',()=>{
    qs('#sendBtn').addEventListener('click',handleSend);
    qs('#chatInput').addEventListener('keydown',e=>{if(e.key==='Enter') handleSend();});
  });

  // VOICE with interim typing + auto-send on silence
  (function(){
    let rec=null, listening=false, typingRAF=null, lastFinal="";
    const mic=()=>qs('#micBtn');
    const supported=()=>('SpeechRecognition'in window)||('webkitSpeechRecognition'in window);
    function ensure(){ if(rec) return rec; const SR=window.SpeechRecognition||window.webkitSpeechRecognition; rec=new SR(); rec.lang='en-GB'; rec.continuous=false; rec.interimResults=true; return rec; }
    function glow(on){ mic().classList.toggle('glow', !!on); }

    // type into the input with a smooth animation
    function typeIntoInput(targetText){
      const input=qs('#chatInput'); if(!input) return;
      const current=input.value;
      if(current===targetText) return;
      const start=performance.now();
      const duration = Math.min(700, 50 * Math.max(1, targetText.length - current.length)); // quick but readable
      const from=current; const to=targetText;
      cancelAnimationFrame(typingRAF);
      function step(t){
        const p=Math.min(1, (t-start)/duration);
        const cut=Math.round(from.length + (to.length - from.length)*p);
        input.value = to.slice(0, cut);
        if(p<1) typingRAF=requestAnimationFrame(step);
      }
      typingRAF=requestAnimationFrame(step);
    }

    function toggleMic(){
      if(!supported()){ addMsg('bot','Speech recognition isnâ€™t supported in this browser.'); return; }
      const r=ensure();
      if(!listening){
        listening=true; glow(true); lastFinal="";
        r.start();

        r.onresult=(e)=>{
          let finalText = "", interim = "";
          for(let i=e.resultIndex;i<e.results.length;i++){
            const tr = e.results[i][0].transcript;
            if(e.results[i].isFinal) finalText += tr;
            else interim += tr;
          }
          if(finalText){ lastFinal += finalText; typeIntoInput(lastFinal.trim()); }
          else if(interim){ typeIntoInput((lastFinal + interim).trim()); }
        };

        r.onerror=()=>{ listening=false; glow(false); addMsg('bot','Sorry â€” I couldnâ€™t hear that. Try again?'); };
        r.onend=()=>{ // silence => auto-send
          listening=false; glow(false);
          const i=qs('#chatInput'); const t=(i.value||"").trim();
          if(t) handleSend();
        };
      }else{
        r.stop(); listening=false; glow(false);
      }
    }

    document.addEventListener('DOMContentLoaded',()=>{ mic().addEventListener('click',toggleMic); });
  })();
</script>
</body>
</html>
