(()=>{const orbit=document.querySelector(".orbit-wrap");if(!orbit)return;(()=>{let centre=orbit.querySelector(".hex-centre");if(!centre){centre=document.createElement("div");centre.className="hex-centre";orbit.appendChild(centre)}if(!centre.querySelector(".hex")){const hex=document.createElement("div");hex.className="hex";centre.appendChild(hex)}if(!centre.querySelector(".hex-glow")){const g=document.createElement("div");g.className="hex-glow";centre.appendChild(g)}let label=centre.querySelector(".centre-label");if(!label){label=document.createElement("div");label.className="centre-label";centre.appendChild(label)}label.textContent="Select your demo"})();orbit.querySelectorAll(".bot, .bot-pill").forEach(b=>b.classList.add("bot-pill"));const tip=document.getElementById("orbit-tooltip")||(()=>{const t=document.createElement("div");t.id="orbit-tooltip";orbit.appendChild(t);return t})();const showTip=(btn,text,where)=>{tip.textContent=text;tip.style.display="block";const br=btn.getBoundingClientRect();const or=orbit.getBoundingClientRect();const pad=10;const xMid=br.left-or.left+br.width/2;const yMid=br.top-or.top+br.height/2;switch(where){case"left":tip.style.left=`${br.left-or.left-tip.offsetWidth-pad}px`;tip.style.top=`${yMid-tip.offsetHeight/2}px`;break;case"right":tip.style.left=`${br.right-or.left+pad}px`;tip.style.top=`${yMid-tip.offsetHeight/2}px`;break;case"top":tip.style.left=`${xMid-tip.offsetWidth/2}px`;tip.style.top=`${br.top-or.top-tip.offsetHeight-pad}px`;break;default:tip.style.left=`${xMid-tip.offsetWidth/2}px`;tip.style.top=`${br.bottom-or.top+pad}px`}};const hideTip=()=>{tip.style.display="none"};const attachShoot=btn=>{if(btn.querySelector(".shoot"))return;const s=document.createElement("span");s.className="shoot";Object.assign(s.style,{position:"absolute",left:"50%",top:"50%",height:"2px",background:"linear-gradient(90deg, rgba(185,138,255,.6), rgba(185,138,255,0))",transformOrigin:"0 0",pointerEvents:"none",opacity:"0",transition:"transform .35s ease, opacity .2s"});btn.style.position="relative";btn.appendChild(s);const place=()=>{const br=btn.getBoundingClientRect();const or=orbit.getBoundingClientRect();const cx=or.left+or.width/2;const cy=or.top+or.height/2;const bx=br.left+br.width/2;const by=br.top+br.height/2;const angle=Math.atan2(cy-by,cx-bx);const len=Math.min(120,Math.hypot(cx-bx,cy-by)-80);s.style.width=`${Math.max(0,len)}px`;s.style.transform=`rotate(${angle}rad)`};place();new ResizeObserver(place).observe(orbit);new ResizeObserver(place).observe(btn);btn.addEventListener("mouseenter",()=>{s.style.opacity="1";s.style.transform+=` scaleX(1.15)`});btn.addEventListener("mouseleave",()=>{s.style.opacity="0";s.style.transform=s.style.transform.replace(" scaleX(1.15)","")})};const overlay=document.getElementById("chat-overlay");const chatTitle=document.getElementById("chat-title");const chatSub=document.getElementById("chat-sub");const prompts=document.getElementById("prompts");const chatWin=document.getElementById("chat-window");const input=document.getElementById("chat-input");const sendBtn=document.getElementById("chat-send");const closeBtn=document.getElementById("chat-close");const micBtn=document.getElementById("mic");const addBubble=(text,me=false)=>{const b=document.createElement("div");b.className="bubble"+(me?" me":"");b.textContent=text;chatWin.appendChild(b);chatWin.scrollTop=chatWin.scrollHeight};const openDialog=key=>{const bot=APP.BOTS[key];if(!bot)return;overlay.style.display="flex";chatTitle.textContent=bot.title;if(chatSub)chatSub.textContent="Try these prompts:";prompts.innerHTML="";bot.prompts.forEach(p=>{const chip=document.createElement("button");chip.className="chip";chip.textContent=p;chip.addEventListener("click",()=>{input.value=p;input.focus()});prompts.appendChild(chip)});chatWin.innerHTML="";const hi=document.createElement("div");hi.className="bubble intro";hi.textContent=`Hi — ask me about ${bot.title.toLowerCase()}.`;chatWin.appendChild(hi)};orbit.querySelectorAll(".bot-pill").forEach(btn=>{const key=btn.dataset.bot;const data=APP.BOTS[key];if(!data)return;const side=btn.classList.contains("left")?"left":btn.classList.contains("right")?"right":btn.classList.contains("top")?"top":"bottom";attachShoot(btn);btn.addEventListener("mouseenter",()=>showTip(btn,data.tooltip,side));btn.addEventListener("mouseleave",hideTip);btn.addEventListener("click",()=>openDialog(key))});sendBtn?.addEventListener("click",()=>{const val=input.value.trim();if(!val)return;addBubble(val,true);input.value="";if(micBtn?.getAttribute("aria-pressed")==="true")micBtn.click();setTimeout(()=>addBubble("Got it — here's how I’d handle that…"),450)});closeBtn?.addEventListener("click",()=>{overlay.style.display="none";if(micBtn?.getAttribute("aria-pressed")==="true")micBtn.click()});addEventListener("keydown",e=>{if(e.key==="Escape"&&overlay.style.display==="flex")closeBtn.click()})})();
